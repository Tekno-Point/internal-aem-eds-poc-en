import Swiper from "../swipper/swipper-bundle.min.js";

export default function decorate(block) {
  const children = Array.from(block.children);

  // Create swiper-wrapper
  const swiperWrapper = document.createElement("div");
  swiperWrapper.className = "swiper-wrapper";

  // Loop from second child onwards
  children.slice(1).forEach((child) => {
    const swiperSlide = document.createElement("div");
    swiperSlide.className = "swiper-slide";

    // Move child itself inside slide, not just its content
    swiperSlide.appendChild(child); // âœ… Moves without cloning or innerHTML

    swiperWrapper.appendChild(swiperSlide);
  });

  // Create Swiper container
  const swiperContainer = document.createElement("div");
  swiperContainer.className = "swiper swiper-blog";
  swiperContainer.appendChild(swiperWrapper);

  // Add pagination
  const swiperPagination = document.createElement("div");
  swiperPagination.className = "swiper-pagination";
  swiperContainer.appendChild(swiperPagination);

  // Append swiper after first static card
  block.appendChild(swiperContainer);

  // Init Swiper
  new Swiper(".swiper-blog", {
    slidesPerView: 1,
    spaceBetween: 20,
    pagination: {
      el: ".swiper-pagination",
      clickable: true,
    },
    breakpoints: {
      768: {
        slidesPerView: 3,
      },
    },
  });
}
